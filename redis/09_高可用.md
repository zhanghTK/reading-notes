Sentinel：Redis 高可用解决方案，有若干个 Sentinel 实例 组成 Sentinel 系统 可以监视任意多个主服务器及其从服务器，并在被监视的主服务器进入下线状态时自动将下线主服务器属下的某个从服务器升级为新的主服务器

## 启动并初始化 Sentinel

启动命令：redis-sentinel /path/to/your/sentinel.conf 或 redis-server /path/to/your/sentinel.conf --sentinel

Sentinel启动执行步骤：
1. 初始化服务器
2. 将普通 Redis 服务器使用的代码替换成 Sentinel 专用代码
3. 初始化 Sentinel 状态
4. 根据给定的配置文件，初始化 Sentinel 的监视主服务列表
5. 创建连向主服务器的网络连接

### 初始化服务器

Sentinel 是运行在特殊模式下的 Redis 服务器，初始化与 Redis 服务器初始化过程类似，各主要功能的使用：
![Sentinel 模式下 Redis 服务器主要功能](https://i.loli.net/2017/08/03/5982f922c3b60.png)

### 使用 Sentinel 专用代码

代码的替换：
1. 宏定义：#deine REDIS_SERVERPORT 6379 -> #define REDIS_SENTINEL_PORT 26379
2. 结构体：redis.c/redisCommandTable -> sentinel.c/sentinelcmds

### 初始化 Sentinel 状态

不同于 redisServer，Sentinel 模式下服务器会初始化一个 sentinel.

